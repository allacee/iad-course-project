CREATE TABLE П_ЛИЧНОСТЬ
( 
	ИД_ЛИЧНОСТЬ SERIAL PRIMARY KEY,
	НИКНЕЙМ TEXT UNIQUE NOT NULL,
	ЭЛ_ПОЧТА TEXT UNIQUE NOT NULL,
	ХЕШ_ПАРОЛЬ TEXT NOT NULL
);

CREATE TABLE П_ИНФО
(
	ИД_ИНФО SERIAL PRIMARY KEY,
	ИД_ЛИЧНОСТЬ INT NOT NULL UNIQUE REFERENCES П_ЛИЧНОСТЬ(ИД_ЛИЧНОСТЬ),
	ИМЯ TEXT,
	ФАМИЛИЯ TEXT,
	СТРАНА TEXT,
	ГОРОД TEXT,
	ДАТА_РОЖДЕН DATE,
	ДАТА_РЕГИСТР DATE
);

CREATE TABLE П_ИГРА
(
	ИД_ИГРА SERIAL PRIMARY KEY,
	НАЗВАНИЕ TEXT,
	ГОД_ВЫХОДА INT,
	ОПИСАНИЕ TEXT
);

CREATE TABLE П_ЛИЧН_ИГРА
(
	ИД_ЛИЧН_ИГРА SERIAL PRIMARY KEY,
	ИД_ЛИЧНОСТЬ INT NOT NULL REFERENCES П_ЛИЧНОСТЬ(ИД_ЛИЧНОСТЬ),
	ИД_ИГРА INT NOT NULL REFERENCES П_ИГРА(ИД_ИГРА)
);

CREATE TABLE П_СОБЫТИЕ 
(
	ИД_СОБЫТИЕ SERIAL PRIMARY KEY,
	ИД_ЛИЧНОСТЬ INT REFERENCES П_ЛИЧНОСТЬ(ИД_ЛИЧНОСТЬ),
	ОПИСАНИЕ TEXT NOT NULL,
	ДАТА DATE NOT NULL,
	ВРЕМЯ_НАЧ TIME NOT NULL,
	ВРЕМЯ_КОН TIME
);

//ТРИГГЕР: ЕСЛИ НЕТ ЗАГОЛОВКА - ЗНАЧИТ БЕЗ ТЕМЫ, ДОБАВИТЬ ДАТУ СОЗДАНИЯ
CREATE TABLE П_ДНЕВНИК
(
	ИД_ДНЕВНИК SERIAL PRIMARY KEY,
	ИД_ЛИЧНОСТЬ INT REFERENCES П_ЛИЧНОСТЬ(ИД_ЛИЧНОСТЬ),
	ЗАГОЛОВОК TEXT NOT NULL,
	ЗАПИСЬ TEXT NOT NULL,
	ДАТА_СОЗДАНИЕ DATE NOT NULL
);

//ТРИГГЕР: ЕСЛИ НЕТ МЕСТА - ЗНАЧИТ ГОТОВИТ САМ
CREATE TABLE П_БЛЮДО
(
	ИД_БЛЮДО SERIAL PRIMARY KEY,
	ИД_ЛИЧНОСТЬ INT REFERENCES П_ЛИЧНОСТЬ(ИД_ЛИЧНОСТЬ),
	НАЗВАНИЕ TEXT NOT NULL,
	МЕСТО TEXT,
	ЦЕНА INT
);

CREATE TABLE П_РАЦИОН
(
	ИД_РАЦИОН SERIAL PRIMARY KEY,
	ИД_ЛИЧНОСТЬ INT REFERENCES П_ЛИЧНОСТЬ(ИД_ЛИЧНОСТЬ),
	ДАТА DATE NOT NULL,
	ИД_БЛЮДО INT REFERENCES П_БЛЮДО(ИД_БЛЮДО) NOT NULL
);

CREATE TABLE П_ЗАДАЧА
(
	ИД_ЗАДАЧА SERIAL PRIMARY KEY,
	ИД_ЛИЧНОСТЬ INT REFERENCES П_ЛИЧНОСТЬ(ИД_ЛИЧНОСТЬ),
	ДАТА DATE NOT NULL,
	СТАТУС BOOLEAN
);

CREATE TABLE П_СООБЩЕНИЕ
(
	ИД_СООБЩЕНИЕ SERIAL PRIMARY KEY,
	ОТ_ЛИЧНОСТЬ INT NOT NULL REFERENCES П_ЛИЧНОСТЬ(ИД_ЛИЧНОСТЬ),
	КОМУ_ЛИЧНОСТЬ INT NOT NULL REFERENCES П_ЛИЧНОСТЬ(ИД_ЛИЧНОСТЬ),
	ТЕМА TEXT NOT NULL,
	ТЕКСТ TEXT NOT NULL
);

